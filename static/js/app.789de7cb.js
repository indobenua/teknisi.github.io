(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0270":function(e,t,a){},1487:function(e,t,a){"use strict";a("18c6")},"16c4":function(e,t,a){},"18c6":function(e,t,a){},"196c":function(e,t,a){"use strict";a("886a")},"3b1f":function(e,t,a){},"460c":function(e,t,a){},5358:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("ba4c"),n=a.n(r),s=a("660e");n.a.use(s["a"],{breakpoints:{mobile:450,tablet:900,laptop:1250,desktop:1/0}});var i=a("8c4f");n.a.use(i["a"]);var o=a("bb71");a("da64");n.a.use(o["a"],{theme:{primary:"#ea80fc",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},iconfont:"md"});var c=a("b079"),l=a.n(c);a("4238");n.a.use(l.a,{position:"top"});var u=a("8cb8"),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-form"},[t("h1",[e._v("INDOBENUA")]),e.loading?t("div",[t("i",{staticClass:"fa fa-spinner fa-spin"})]):t("form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[t("div",{staticClass:"input-group"},[t("label",{attrs:{for:"username"}},[e._v("Username")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",id:"username",required:"",autocomplete:"off"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e.errors.username?t("span",{staticClass:"error-message"},[e._v(e._s(e.errors.username[0]))]):e._e()]),t("div",{staticClass:"input-group"},[t("label",{attrs:{for:"password"}},[e._v("Password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password",required:"",autocomplete:"off"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e.errors.password?t("span",{staticClass:"error-message"},[e._v(e._s(e.errors.password[0]))]):e._e()]),t("button",{staticClass:"submit-button",attrs:{type:"submit"}},[e._v("Login")])]),e.errors.general?t("span",{staticClass:"error-message"},[e._v(e._s(e.errors.general))]):e._e()])])},d=[],f=(a("96cf"),a("1da1")),v=(a("7f7f"),a("faac")),m=a.n(v),h=(a("a481"),a("cee4")),g=a("2f62");n.a.use(g["a"]);var b=new g["a"].Store({state:{user:null,isLoading:!1},mutations:{setUser:function(e,t){e.user=t},setLoading:function(e,t){e.isLoading=t}},actions:{fetchUser:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.prev=1,e.next=4,C.get("/user");case 4:r=e.sent,a("setUser",r.data),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Failed to fetch user data:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}(),setLoading:function(e,t){var a=e.commit;a("setLoading",t)}}}),_=h["a"].create({baseURL:"https://ac.igm.biz.id/api",headers:{"Content-Type":"application/json"}});_.interceptors.request.use((function(e){var t=localStorage.getItem("api_token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),b.dispatch("setLoading",!0),e}),(function(e){return b.dispatch("setLoading",!1),Promise.reject(e)})),_.interceptors.response.use((function(e){return b.dispatch("setLoading",!1),e}),(function(e){return e&&e.response&&e.response.status&&401===e.response.status&&(console.log("User tidak autentik"),localStorage.clear(),"/login"!==location.pathname&&location.replace("/login")),b.dispatch("setLoading",!1),Promise.reject(e)}));var C=_,w={data:function(){return{username:"",password:"",deviceName:"",errors:{},loading:!1}},mounted:function(){this.deviceName=m.a.name+" "+m.a.version},methods:{login:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.errors={},this.loading=!0,e.prev=2,e.next=5,C.post("/login",{username:this.username,password:this.password,device_name:this.deviceName});case 5:t=e.sent,t.data&&t.data.token&&(localStorage.setItem("api_token",t.data.token),localStorage.setItem("user_id",t.data.user.id),this.$router.push("/")),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),e.t0.response&&422===e.t0.response.status?this.errors=e.t0.response.data.errors||{}:this.errors.general="Login failed. Please check your credentials and try again.";case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})));function t(){return e.apply(this,arguments)}return t}()}},k=w,O=(a("cc14"),a("2877")),y=Object(O["a"])(k,p,d,!1,null,"44503f32",null),x=y.exports,j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home-container"},[e.user?t("div",{staticClass:"welcome-message"},[e._v(" Welcome, "+e._s(e.user.surname)+" "+e._s(e.user.first_name)+" "+e._s(e.user.last_name)+" ")]):e._e(),t("div",{staticClass:"button-container"},[t("button",{staticClass:"button check-in-button",on:{click:e.handleCheckLockIn}},[e._v("Check Lock In")]),t("button",{staticClass:"button check-out-button",on:{click:e.handleCheckLockOut}},[e._v("Check Lock Out")])]),t("div",{staticClass:"location-text"},[e._v(e._s(e.locationText))])])},P=[],D=(a("8e6e"),a("ac6a"),a("456d"),a("ade3"));function S(e){return F.apply(this,arguments)}function F(){return F=Object(f["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t||!t.showLoc){e.next=4;break}return e.next=3,T();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e({position:a});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){t(new Error("Geolocation error: ".concat(e.message)))})):t(new Error("Geolocation is not supported by this browser."))})));case 5:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function T(){return R.apply(this,arguments)}function R(){return R=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:return t=e.sent,a=t.position,r="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(a.coords.latitude,"&lon=").concat(a.coords.longitude),e.next=8,C.get(r);case 8:if(n=e.sent,n.data){e.next=11;break}throw new Error("Indobenua");case 11:return s=n.data,e.abrupt("return",{position:a,loc:s});case 15:throw e.prev=15,e.t0=e["catch"](0),new Error("Failed to fetch location details: ".concat(e.t0.message));case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),R.apply(this,arguments)}function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){Object(D["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N={data:function(){return{loading:!0,errorMsg:null,position:null,locationDetails:null,deviceName:""}},computed:I(I({},Object(g["c"])(["user"])),{},{locationText:function(){return this.errorMsg?this.errorMsg:this.locationDetails?this.locationDetails.display_name:"Waiting.."}}),methods:{fetchData:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,C.get("/statistic");case 4:t=e.sent,this.setData(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Failed to fetch data:",e.t0);case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}(),updateApp:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{console.log("Updating app...")}catch(t){console.error("Error fetching latest update: ".concat(t))}case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),fetchLocation:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({showLoc:!0});case 3:t=e.sent,a=t.position,r=t.loc,this.position=a,this.locationDetails=r,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error("Failed to fetch location:",e.t0),this.errorMsg=e.t0.message;case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),handleCheckLockIn:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("/check-lock",{latitude:this.position.coords.latitude,longitude:this.position.coords.longitude,description:"Check Lock In",name:"check_clock_in"});case 3:alert("Success","Check Lock In successful"),e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),alert("Error",e.t0.message),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),handleCheckLockOut:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("/check-lock",{latitude:this.position.coords.latitude,longitude:this.position.coords.longitude,description:"Check Lock Out",name:"check_clock_out"});case 3:alert("Success","Check Lock Out successful"),e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),alert("Error",e.t0.message),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.deviceName=m.a.name+" "+m.a.version,this.updateApp(),this.fetchLocation(),setTimeout((function(){localStorage.getItem("api_token")&&!document.querySelector(".nav-tabs")&&location.reload()}),5e3)}},M=N,E=(a("196c"),Object(O["a"])(M,j,P,!1,null,"e7b98c52",null)),$=E.exports,U=function(){var e=this,t=e._self._c;return t("div",{staticClass:"task-container"},[t("div",{staticClass:"header-container"},[t("div",{staticClass:"filter-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"input",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),t("button",{staticClass:"filter",on:{click:e.toggleDateFilterModal}},[e._v(" "+e._s(e.dateFilter)+" ")]),t("button",{staticClass:"filter",style:{backgroundColor:e.getStatusFilterColor()},on:{click:e.toggleStatusFilterModal}},[e._v(" "+e._s(e.statusFilter)+" ")])])]),e.loading?t("div",{staticClass:"loading-indicator"},[t("div",{staticClass:"loading-text"},[e._v("Loading...")])]):e.filteredTasks.length?t("div",{staticClass:"tasks-list"},e._l(e.filteredTasks,(function(a,r){return t("div",{key:r,staticClass:"task-item"},[t("router-link",{staticClass:"task-link",attrs:{to:{name:"DetailTask",params:{task:a,id:a.id}}}},[t("div",{staticClass:"item",style:{backgroundColor:e.getStatusFilterColor()}},[t("div",{staticClass:"avatar"},[t("span",{staticClass:"avatar-text"},[e._v(e._s(a.store.store_code))])]),t("div",{staticClass:"item-content"},[t("div",{staticClass:"title"},[e._v(e._s(a.store.route.index_route)+". "+e._s(a.store.store_name))]),t("div",{staticClass:"description"},[e._v(e._s(a.trx_no)+" Periode: "+e._s(a.periode))]),t("div",{staticClass:"reminder"},[e._v(" "+e._s(a.previous_month_projects.reduce((function(e,t){return(e?"":"REMINDER: ")+t.note}),"").substr(0,50))+" ")])]),t("div",{staticClass:"right-column"},[t("div",{staticClass:"req-date"},[e._v(e._s(e.formatDate(a.req_date)))])])])])],1)})),0):t("div",{staticClass:"empty-message"},[t("div",[e._v("No tasks available.")])]),e.isDateFilterModalVisible?t("div",{staticClass:"modal-backdrop"},[t("div",{staticClass:"modal-container"},[t("button",{on:{click:function(t){return e.selectDateFilter("Hari Ini")}}},[e._v("Hari Ini")]),t("button",{on:{click:function(t){return e.selectDateFilter("Minggu Ini")}}},[e._v("Minggu Ini")]),t("button",{on:{click:function(t){return e.selectDateFilter("Bulan Ini")}}},[e._v("Bulan Ini")])])]):e._e(),e.isStatusFilterModalVisible?t("div",{staticClass:"modal-backdrop"},[t("div",{staticClass:"modal-container"},[t("button",{on:{click:function(t){return e.selectStatusFilter("Pending")}}},[e._v("Pending")]),t("button",{on:{click:function(t){return e.selectStatusFilter("Review")}}},[e._v("Review")]),t("button",{on:{click:function(t){return e.selectStatusFilter("Lengkap")}}},[e._v("Lengkap")])])]):e._e()])},A=[],V=(a("6762"),a("2fdb"),{data:function(){return{loading:!1,tasks:[],searchText:"",dateFilter:"Hari Ini",statusFilter:"Pending",isDateFilterModalVisible:!1,isStatusFilterModalVisible:!1}},computed:{filteredTasks:function(){var e=this;return this.tasks.filter((function(t){return(t.store.store_name.toLowerCase().includes(e.searchText.toLowerCase())||t.task.subject.toLowerCase().includes(e.searchText.toLowerCase())||t.store.store_code.toLowerCase().includes(e.searchText.toLowerCase()))&&e.filterTasks(t)}))}},methods:{fetchTasks:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,C.get("/task");case 4:t=e.sent,this.tasks=t.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Error fetching tasks:",e.t0);case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}(),filterTasks:function(e){var t=this,a=new Date,r=new Date(e.req_date),n=function(){if("Hari Ini"===t.dateFilter)return r.toDateString()===a.toDateString();if("Minggu Ini"===t.dateFilter){var e=new Date(a.setDate(a.getDate()-a.getDay())),n=new Date(a.setDate(a.getDate()-a.getDay()+6));return r>=e&&r<=n}if("Bulan Ini"===t.dateFilter){var s=new Date(a.getFullYear(),a.getMonth(),1),i=new Date(a.getFullYear(),a.getMonth()+1,0);return r>=s&&r<=i}return!0}(),s=function(){return"Lengkap"===t.statusFilter?"completed"===e.task.status:"Review"===t.statusFilter?"in_progress"===e.task.status&&e.task.comments&&e.task.comments.length>0:"Pending"!==t.statusFilter||"in_progress"===e.task.status&&(!e.task.comments||0===e.task.comments.length)}();return"Hari Ini"===this.dateFilter&&"Pending"===this.statusFilter?r<=a&&s:n&&s},toggleDateFilterModal:function(){this.isDateFilterModalVisible=!this.isDateFilterModalVisible},toggleStatusFilterModal:function(){this.isStatusFilterModalVisible=!this.isStatusFilterModalVisible},selectDateFilter:function(e){this.dateFilter=e,this.isDateFilterModalVisible=!1},selectStatusFilter:function(e){this.statusFilter=e,this.isStatusFilterModalVisible=!1},getStatusFilterColor:function(){switch(this.statusFilter){case"Pending":return"#fff3b0";case"Review":return"#b2f0f0";case"Lengkap":return"#d4f8d4";default:return"#fff"}},formatDate:function(e){var t=new Date(e);return t.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit"})}},mounted:function(){this.fetchTasks()}}),q=V,B=(a("7bc7"),Object(O["a"])(q,U,A,!1,null,"72ac602d",null)),H=B.exports,z=function(){var e=this,t=e._self._c;return t("div",[t("div",{ref:"detailTaskContainer",staticClass:"detail-task-container"},[t("div",{staticClass:"header"},[t("router-link",{staticClass:"back-button",attrs:{to:"/task"}},[e._v("Back to Tasks")]),t("h1")],1),e.task?t("div",[t("div",{staticClass:"task-detail"},[t("h2",[e._v(e._s(e.task.store.store_name))]),t("p",[t("strong",[e._v("Kode Toko:")]),e._v(" "+e._s(e.task.store.store_code))]),t("p",[t("strong",[e._v("Rute:")]),e._v(" "+e._s(e.task.store.route.index_route))]),t("p",[t("strong",[e._v("Nomer Transaksi:")]),e._v(" "+e._s(e.task.trx_no))]),t("p",[t("strong",[e._v("Periode:")]),e._v(" "+e._s(e.task.periode))]),t("p",[t("strong",[e._v("Request Date:")]),e._v(" "+e._s(e.formatDate(e.task.req_date)))]),t("p",[t("strong",[e._v("Status:")]),e._v(" "+e._s(e.task.task.status))])]),t("div",{staticClass:"infoContainer"},[t("div",{staticClass:"infoBox"},[t("div",{staticClass:"infoTitle"},[e._v("Catatan bulan lalu:")]),t("div",{staticClass:"red-text"},[e._v(" "+e._s(e.task.previous_month_projects&&e.task.previous_month_projects.length?e.task.previous_month_projects.reduce((function(e,t){return e+t.note}),"").reduce((function(e,t){return e+t.note}),""):"")+" ")])]),t("div",{staticClass:"infoBox"},[t("div",{staticClass:"infoTitle"},[e._v("Tambahkan Catatan bulan ini:")]),t("Modal",{attrs:{isVisible:e.isModalVisible,task:e.task},on:{close:e.closeModal,success:e.handleSuccess}}),t("div",{staticClass:"red-text",on:{click:e.openModal}},[e.task.note?t("span",[e._v(" "+e._s(e.task.note)+"  "),t("i",{staticClass:"fas fa-edit"})]):t("span",{staticClass:"icon-plus danger",on:{click:e.openModal}},[t("i",{staticClass:"fas fa-plus-circle"})])])],1)]),t("hr"),t("div",[t("ul",{ref:"commentList",staticClass:"comment-list"},e._l(e.comments,(function(a,r){return t("li",{key:r},[t("div",{class:{"comment-content current-user-content":a.commented_by.id===e.currentUserId,"comment-content other-user-content":a.commented_by.id!==e.currentUserId}},[t("div",{staticClass:"comment-header"},[t("span",{staticClass:"commented-by"},[e._v(e._s(a.commented_by.nickname))]),t("span",{staticClass:"comment-time"},[e._v(e._s(a.created_at))])]),a.media&&a.media.length?t("div",{staticClass:"comment-images"},e._l(a.media,(function(e,a){return t("img",{key:a,staticClass:"comment-image",attrs:{src:e.display_url,alt:"Comment image "+a,title:e.display_name}})})),0):e._e(),e._v(" "+e._s(a.comment)+" ")])])})),0)])]):t("div",{staticClass:"loading-indicator"},[t("i",{staticClass:"fa fa-spinner fa-spin"})])]),e.previewImages.length?t("div",{staticClass:"preview-image-container"},e._l(e.previewImages,(function(a,r){return t("div",{key:r,staticClass:"preview-image-wrapper"},[t("img",{staticClass:"preview-image",attrs:{src:a.data,alt:a.name}}),t("span",{staticClass:"remove-image",on:{click:function(t){return e.removePreviewImage(r)}}},[e._v("×")])])})),0):e._e(),t("div",{staticClass:"input-form"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.additionalText,expression:"additionalText"}],staticClass:"text-input",attrs:{placeholder:"Tambahkan pesan..."},domProps:{value:e.additionalText},on:{input:function(t){t.target.composing||(e.additionalText=t.target.value)}}}),t("div",{staticClass:"icons"},[t("label",{staticClass:"file-upload-button",attrs:{for:"file-upload"}},[t("i",{staticClass:"fas fa-paperclip"}),t("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{id:"file-upload",type:"file",multiple:""},on:{change:e.handleFileUpload}})]),t("button",{staticClass:"send-button",on:{click:e.submitData}},[t("i",{staticClass:"fas fa-paper-plane"})])])])])},J=[],G=(a("5df3"),a("1c4c"),function(){var e=this,t=e._self._c;return e.isVisible?t("div",{staticClass:"modal-overlay",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal.apply(null,arguments)}}},[t("div",{staticClass:"modal-content"},[t("span",{staticClass:"close",on:{click:e.closeModal}},[e._v("×")]),t("h2",{staticClass:"reminder-title"},[e._v("Add Reminder")]),t("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[e._m(0),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reminderText,expression:"reminderText"}],attrs:{placeholder:"Tulis disini",id:"reminder",required:""},domProps:{value:e.reminderText},on:{input:function(t){t.target.composing||(e.reminderText=t.target.value)}}})]),t("button",{staticClass:"btn-submit-modal",attrs:{type:"submit"}},[e._v("Simpan!")])])])]):e._e()}),W=[function(){var e=this,t=e._self._c;return t("label",{attrs:{for:"reminder"}},[t("small",[e._v("Untuk pengingat bulan depan:")])])}];function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){Object(D["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q={name:"Modal",props:["isVisible","task"],data:function(){return{reminderText:""}},methods:{closeModal:function(){this.$emit("close")},submitForm:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$axios.post("/reminder/"+this.task.id,{reminder_message:this.reminderText});case 3:t=e.sent,200===t.status&&(this.$emit("success",K(K({},t.data),{},{reminderText:this.reminderText})),this.closeModal()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error submitting reminder:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.reminderText=this.task.note}},X=Q,Z=(a("64a4"),Object(O["a"])(X,G,W,!1,null,null,null)),ee=Z.exports,te={components:{Modal:ee},data:function(){return{task:this.$route.params.task||null,additionalText:"",previewImages:[],isModalVisible:!1,comments:[],currentUserId:JSON.parse(localStorage.getItem("user_id")||"1")}},created:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.task){e.next=6;break}return t=this.$route.params.id,e.next=4,this.fetchTask(t);case 4:e.next=6;break;case 6:setTimeout((function(){a.scrollToBottom()}),500);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchTask:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,C.get("/task/".concat(t));case 4:a=e.sent,this.task=a.data[0],e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Error fetching service call:",e.t0),n.a.$toast.error("Error","Gagal memuat data service call.");case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,8,12,15]])})));function t(t){return e.apply(this,arguments)}return t}(),formatDate:function(e){var t=new Date(e);return t.toLocaleDateString("id-ID")},handleFileUpload:function(e){var t=this,a=Array.from(e.target.files);a.forEach((function(e){var a=new FileReader;a.onload=function(a){t.previewImages.push({name:e.name,data:a.target.result,file:e})},a.readAsDataURL(e)}))},removePreviewImage:function(e){this.previewImages.splice(e,1)},submitData:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.additionalText.trim()){e.next=3;break}return n.a.$toast.error("Tambahkan pesan terlebih dahulu"),e.abrupt("return");case 3:return t=new FormData,t.append("alfa_id",this.task.id),t.append("task_id",this.task.task.id),t.append("comment",this.additionalText),this.previewImages.forEach((function(e){t.append("photos[]",e.file,e.name)})),e.prev=8,e.next=11,C.post("/task",t,{headers:{"Content-Type":"multipart/form-data"}});case 11:a=e.sent,r=a.data,r.success&&(this.comments=r.data.comments,this.additionalText="",this.previewImages=[],this.scrollToBottom()),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](8),console.error("Error submitting data:",e.t0);case 19:case"end":return e.stop()}}),e,this,[[8,16]])})));function t(){return e.apply(this,arguments)}return t}(),openModal:function(){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},handleSuccess:function(e){e.success&&(this.task.note=e.reminderText),console.log("Reminder added successfully:",e)},scrollToBottom:function(){var e=this;this.$nextTick((function(){var t=e.$refs.detailTaskContainer;setTimeout((function(){t.scrollTop=t.scrollHeight}),200)}))}}},ae=te,re=(a("f2f3"),Object(O["a"])(ae,z,J,!1,null,"5ab23688",null)),ne=re.exports,se=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"filter-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],staticClass:"input",attrs:{placeholder:"Search..."},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),t("button",{staticClass:"filter",style:{backgroundColor:e.getStatusFilterColor()},on:{click:function(t){e.isStatusFilterModalVisible=!0}}},[e._v(" "+e._s(e.statusFilter)+" ")])]),t("transition",{attrs:{name:"fade"}},[e.isStatusFilterModalVisible?t("div",{staticClass:"modal"},[t("div",{staticClass:"modal-backdrop",on:{click:function(t){e.isStatusFilterModalVisible=!1}}}),t("div",{staticClass:"modal-container"},[t("button",{staticClass:"pending",on:{click:function(t){return e.setStatusFilter("Pending")}}},[e._v("Pending")]),t("button",{staticClass:"progress",on:{click:function(t){return e.setStatusFilter("Progress")}}},[e._v("Progress")]),t("button",{staticClass:"solved",on:{click:function(t){return e.setStatusFilter("Solved")}}},[e._v("Solved")])])]):e._e()]),e.loading?t("div",{staticClass:"loading-indicator"},[t("i",{staticClass:"fa fa-spinner fa-spin"})]):t("div",[e.filteredServiceCalls.length?t("ul",{staticClass:"service-call-list"},e._l(e.filteredServiceCalls,(function(a,r){return t("li",{key:r,staticClass:"service-call-item",style:{backgroundColor:e.getStatusFilterColor()},on:{click:function(t){return e.navigateToDetail(a)}}},[e._m(0,!0),t("div",{staticClass:"item-content"},[t("p",{staticClass:"title"},[e._v(e._s(a.store&&a.store.store_code)+" "+e._s(a.store&&a.store.store_name))]),t("p",{staticClass:"description"},[e._v(e._s(a.subject))])]),t("div",{staticClass:"right-column"},[t("p",{staticClass:"tgl"},[e._v(e._s(e.formatDate(a.trx_date)))])])])})),0):t("div",{staticClass:"centered-view"},[t("p",{staticClass:"centered-text"},[e._v("Tidak ada service call saat ini.")])])])],1)},ie=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"avatar"},[t("i",{staticClass:"fa fa-phone",attrs:{"aria-hidden":"true"}})])}],oe={data:function(){return{loading:!1,serviceCalls:[],searchText:"",statusFilter:"Pending",isStatusFilterModalVisible:!1}},computed:{filteredServiceCalls:function(){var e=this;return this.serviceCalls.filter((function(t){return(t.store&&t.store.store_name.toLowerCase().includes(e.searchText.toLowerCase())||t.store&&t.store.store_code.toLowerCase().includes(e.searchText.toLowerCase())||t.subject&&t.subject.toLowerCase().includes(e.searchText.toLowerCase()))&&e.filterServiceCalls(t)}))}},methods:{fetchServiceCalls:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,C.get("/service-call");case 4:t=e.sent,this.serviceCalls=t.data,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),n.a.$toast.error("Error fetching service calls:"),console.log("Error fetching service calls:",e.t0);case 12:return e.prev=12,this.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,8,12,15]])})));function t(){return e.apply(this,arguments)}return t}(),filterServiceCalls:function(e){return"Pending"===this.statusFilter?"pending"===e.status:"Progress"===this.statusFilter?"in_progress"===e.status:"Solved"!==this.statusFilter||"solved"===e.status},getStatusFilterColor:function(){switch(this.statusFilter){case"Pending":return"#ffebcc";case"Progress":return"#52e5ed";case"Solved":return"#d4f8d4";default:return"#fff"}},setStatusFilter:function(e){this.statusFilter=e,this.isStatusFilterModalVisible=!1},formatDate:function(e){return e.replace(/(\d{4})-(\d{2})-(\d{2})/,"$3/$2")},navigateToDetail:function(e){this.$router.push({name:"DetailServiceCall",params:{serviceCall:e,id:e.id}})}},mounted:function(){this.fetchServiceCalls()}},ce=oe,le=(a("b948"),Object(O["a"])(ce,se,ie,!1,null,"f2a680d6",null)),ue=le.exports,pe=function(){var e=this,t=e._self._c;return e.serviceCall?t("div",{staticClass:"container"},[t("header",{staticClass:"header"},[t("h1",[e._v(e._s(e.serviceCall.store.store_code)+" "+e._s(e.serviceCall.store.store_name))])]),e.loading?t("div",{staticClass:"indicator"},[t("span",[e._v("Loading...")])]):t("div",[t("div",{staticClass:"content"},[t("div",{staticClass:"details"},[t("div",{staticClass:"detail-row"},[t("i",{staticClass:"fa fa-calendar"}),t("span",[e._v(e._s(e.formatDate(e.serviceCall.trx_date)))])]),t("div",{staticClass:"detail-row"},[t("i",{staticClass:"fa fa-info-circle"}),t("span",[e._v(e._s(e.serviceCall.status))])]),t("div",{staticClass:"detail-row"},[t("i",{staticClass:"fa fa-phone"}),t("span",[e._v(e._s(e.serviceCall.pic))])]),t("div",{staticClass:"detail-row"},[t("i",{staticClass:"fa fa-file-text"}),t("span",[e._v(e._s(e.serviceCall.subject))])]),t("div",{staticClass:"detail-row"},[t("i",{staticClass:"fa fa-bank"}),t("span",[e._v(e._s(e.serviceCall.store.address))])])]),e._l(e.lines,(function(a){return t("div",{key:a.id,staticClass:"line-container"},[t("h2",[e._v("Unit No: "+e._s(a.unit_no))]),t("h3",[e._v("Complain Details: "+e._s(a.complain_details))]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.trouble_causer,expression:"line.trouble_causer"}],staticClass:"input",attrs:{placeholder:"Penyebab"},domProps:{value:a.trouble_causer},on:{input:function(t){t.target.composing||e.$set(a,"trouble_causer",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:a.solution,expression:"line.solution"}],staticClass:"input",attrs:{placeholder:"Solusi"},domProps:{value:a.solution},on:{input:function(t){t.target.composing||e.$set(a,"solution",t.target.value)}}}),t("div",{staticClass:"photo-container"},[t("button",{staticStyle:{"font-size":"x-large"},on:{click:function(t){return e.handleAddPhotos(a.id)}}},[t("i",{staticClass:"fa fa-camera"})]),e._l(a.photos,(function(e,a){return t("div",{key:a,staticClass:"photo-preview"},[e.document_name?t("img",{staticClass:"photo",attrs:{src:"https://ac.igm.biz.id/public/uploads/media/"+e.document_name}}):t("img",{staticClass:"photo",attrs:{src:e.uri}})])}))],2)])})),t("div",{staticClass:"button-container"},[t("button",{staticClass:"button cancel-button",on:{click:e.handleCancel}},[e._v("Batal")]),t("button",{staticClass:"button",on:{click:e.handleSave}},[e._v("Simpan")])])],2)])]):e._e()},de=[],fe=a("2909");function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){Object(D["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he={data:function(){return{loading:!1,serviceCall:this.$route.params.serviceCall||null,lines:[]}},created:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.serviceCall){e.next=6;break}return t=this.$route.params.id,e.next=4,this.fetchServiceCall(t);case 4:e.next=7;break;case 6:this.initializeLines(this.serviceCall.lines);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchServiceCall:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,C.get("/service-call/".concat(t));case 4:a=e.sent,this.serviceCall=a.data,this.initializeLines(this.serviceCall.lines),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.error("Error fetching service call:",e.t0),n.a.$toast.error("Error","Gagal memuat data service call.");case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,9,13,16]])})));function t(t){return e.apply(this,arguments)}return t}(),initializeLines:function(e){this.lines=e.map((function(e){return me({},e)}))},formatDate:function(e){var t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},handleInputChange:function(e,t,a){this.lines=this.lines.map((function(r){return r.id===e?me(me({},r),{},Object(D["a"])({},t,a)):r}))},handleAddPhotos:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=document.createElement("input"),a.type="file",a.accept="image/*",a.multiple=!0,a.onchange=function(e){for(var a=e.target.files,n=[],s=function(){var e=a[i],s=new FileReader;s.onload=function(s){n.push({uri:s.target.result,file:e}),n.length===a.length&&(r.lines=r.lines.map((function(e){return e.id===t?me(me({},e),{},{photos:[].concat(Object(fe["a"])(e.photos),n)}):e})))},s.readAsDataURL(e)},i=0;i<a.length;i++)s()},a.click();case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),handleSave:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,t=new FormData,t.append("sc_id",this.serviceCall.id),e.next=6,S();case 6:return a=e.sent,r=a.position,r&&t.append("position",JSON.stringify(r)),this.lines.forEach((function(e,a){e.photos.forEach((function(e){e.file&&t.append("lines[".concat(a,"][photos][]"),e.file)})),t.append("lines[".concat(a,"][solution]"),e.solution),t.append("lines[".concat(a,"][trouble_causer]"),e.trouble_causer)})),e.next=12,C.post("/service-call/update",t,{headers:{"Content-Type":"multipart/form-data"}});case 12:n.a.$toast.success("Berhasil disimpan"),this.$router.push({name:"ServiceCall",params:{serviceCall:this.serviceCall}}),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](1),console.error("Error saving data:",e.t0),n.a.$toast.error("Error","Terjadi kesalahan saat menyimpan data");case 20:return e.prev=20,this.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[1,16,20,23]])})));function t(){return e.apply(this,arguments)}return t}(),handleCancel:function(){this.$router.push({name:"ServiceCall",params:{serviceCall:this.serviceCall}})}}},ge=he,be=(a("fae8"),Object(O["a"])(ge,pe,de,!1,null,"7353d2c0",null)),_e=be.exports,Ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"safe-area"},[t("router-link",{attrs:{to:{name:"EditProfile",params:{userData:e.userData}}}},[t("button",{staticClass:"edit-button"},[t("i",{staticClass:"fa fa-edit edit-btn"})])]),t("div",{staticClass:"profile-container"},[t("img",{staticClass:"profile-image",attrs:{src:e.userData&&e.userData.media?e.userData.media.display_url:"/assets/images/default_profile.png",alt:"Profile Image"}}),t("h1",{staticClass:"title"},[e._v("Profile")]),e.userData?t("div",{staticClass:"data-profile-container"},[t("div",{staticClass:"info-container"},[t("span",{staticClass:"label"},[e._v("Name:")]),t("span",{staticClass:"value"},[e._v(e._s(e.userData.surname)+" "+e._s(e.userData.first_name)+" "+e._s(e.userData.last_name))])]),t("div",{staticClass:"info-container"},[t("span",{staticClass:"label"},[e._v("Username:")]),t("span",{staticClass:"value"},[e._v(e._s(e.userData.username))])]),t("div",{staticClass:"info-container"},[t("span",{staticClass:"label"},[e._v("Email:")]),t("span",{staticClass:"value"},[e._v(e._s(e.userData.email))])]),t("div",{staticClass:"info-container"},[t("span",{staticClass:"label"},[e._v("Jabatan:")]),t("span",{staticClass:"value"},[e._v(e._s(e.userData.jabatan.name))])]),t("div",{staticClass:"logout-button-container"},[t("button",{on:{click:e.handleLogout}},[e._v("Logout")])])]):e._e()])],1)},we=[],ke={setup:function(){var e=Object(r["ref"])(null),t=Object(r["ref"])(!0),a=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.value=!0,e.prev=1,e.next=4,C.post("/logout");case 4:localStorage.clear(),location.replace("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error("Logout failed:",e.t0);case 11:return e.prev=11,t.value=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var a=Object(f["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C.get("/user");case 3:r=a.sent,e.value=r.data,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error("Error fetching user data:",a.t0);case 10:return a.prev=10,t.value=!1,a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})));return function(){return a.apply(this,arguments)}}();return Object(r["onMounted"])((function(){n()})),{userData:e,loading:t,handleLogout:a}}},Oe=ke,ye=(a("1487"),Object(O["a"])(Oe,Ce,we,!1,null,"4ece3d8e",null)),xe=ye.exports,je=function(){var e=this,t=e._self._c;return t("div",{staticClass:"safe-area"},[t("div",{staticClass:"custom-header"}),t("div",{staticClass:"form-container"},[t("div",{staticClass:"image-container"},[t("img",{staticClass:"profile-image",attrs:{src:e.profilePhoto?e.profilePhoto.uri:e.userData&&e.userData.media?e.userData.media.display_url:"/assets/images/default_profile.png",alt:"Profile Image"}}),t("button",{staticClass:"edit-icon",on:{click:e.pickImage}},[t("i",{staticClass:"fa fa-edit"})]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.handleFileChange}})]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.surName,expression:"surName"}],staticClass:"input",attrs:{placeholder:"SurName"},domProps:{value:e.surName},on:{input:function(t){t.target.composing||(e.surName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],staticClass:"input",attrs:{placeholder:"First Name"},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],staticClass:"input",attrs:{placeholder:"Last Name"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentPassword,expression:"currentPassword"}],staticClass:"input",attrs:{type:"password",placeholder:"Current Password"},domProps:{value:e.currentPassword},on:{input:function(t){t.target.composing||(e.currentPassword=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"input",attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}}),t("button",{staticClass:"save-button",on:{click:e.handleSave}},[e._v("Simpan")])]),e.loading?t("div",{staticClass:"loading-overlay"},[t("i",{staticClass:"fa fa-spinner fa-spin"})]):e._e()])},Pe=[],De={setup:function(){var e=Object(r["ref"])(null),t=Object(r["ref"])(e.surname||""),a=Object(r["ref"])(e.first_name||""),s=Object(r["ref"])(e.last_name||""),i=Object(r["ref"])(e.email||""),o=Object(r["ref"])(""),c=Object(r["ref"])(""),l=Object(r["ref"])(""),u=Object(r["ref"])(e.profile_photo||null),p=Object(r["ref"])(!1),d=Object(r["ref"])(null),v=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.click();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onload=function(){u.value={uri:URL.createObjectURL(t),file:t}},a.readAsDataURL(t)}},h=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.a.$toast.success("Password berhasil diubah"),localStorage.clear(),location.replace("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var r,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.value===c.value){e.next=3;break}return n.a.$toast.error("Password tidak sama!"),e.abrupt("return");case 3:if(!o.value||l.value){e.next=6;break}return n.a.$toast.error("Passwords tidak boleh kosong!"),e.abrupt("return");case 6:return p.value=!0,e.prev=7,r=new FormData,r.append("surname",t.value),r.append("first_name",a.value),r.append("last_name",s.value),r.append("email",i.value),o.value&&(r.append("password",o.value),r.append("current_password",l.value)),u.value&&u.value.file&&r.append("profile_photo",u.value.file),e.next=17,C.post("/user",r,{headers:{"Content-Type":"multipart/form-data"}});case 17:if(d=e.sent,200!==d.status){e.next=28;break}if(!d.data.password_changed){e.next=22;break}return h(),e.abrupt("return");case 22:if(!d.data.error){e.next=25;break}return n.a.$toast.error(d.data.msg),e.abrupt("return");case 25:n.a.$toast.success("Profile berhasil diupdate"),e.next=29;break;case 28:n.a.$toast.error("Failed to update profile");case 29:e.next=35;break;case 31:e.prev=31,e.t0=e["catch"](7),console.error("Error updating profile:",e.t0),n.a.$toast.error("Failed to update profile");case 35:return e.prev=35,p.value=!1,e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[7,31,35,38]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.get("/user");case 3:a=t.sent,e.value=a.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Error fetching user data:",t.t0);case 10:return t.prev=10,p.value=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})));return function(){return t.apply(this,arguments)}}();return Object(r["onMounted"])((function(){b()})),Object(r["watch"])(e,(function(e){e&&(t.value=e.surname||"",a.value=e.first_name||"",s.value=e.last_name||"",i.value=e.email||"",u.value=e.profile_photo||null)})),{userData:e,surName:t,firstName:a,lastName:s,email:i,password:o,confirmPassword:c,currentPassword:l,profilePhoto:u,loading:p,pickImage:v,handleFileChange:m,handleSave:g,fileInput:d}}},Se=De,Fe=(a("a7df"),Object(O["a"])(Se,je,Pe,!1,null,"1149248b",null)),Te=Fe.exports,Re=[{path:"/",exact:!0,component:$,icon:"home",name:"Home",meta:{requiresAuth:!0}},{path:"/task",exact:!0,component:H,icon:"psychology",name:"Task",meta:{requiresAuth:!0}},{path:"/task/:id",exact:!0,component:ne,icon:"psychology",name:"DetailTask",meta:{requiresAuth:!0}},{path:"/service-call",exact:!0,component:ue,icon:"psychology",name:"ServiceCall",meta:{requiresAuth:!0}},{path:"/service-call/:id",exact:!0,component:_e,icon:"psychology",name:"DetailServiceCall",meta:{requiresAuth:!0}},{path:"/profile",exact:!0,component:xe,icon:"psychology",name:"Profile",meta:{requiresAuth:!0}},{path:"/edit-profile",exact:!0,component:Te,icon:"psychology",name:"EditProfile",meta:{requiresAuth:!0}},{path:"/login",exact:!0,component:x,icon:"question_answer",name:"Login"},{path:"*",redirect:"/"}],Le=new i["a"]({routes:Re,mode:"history"});Le.beforeEach((function(e,t,a){var r=localStorage.getItem("api_token");e.matched.some((function(e){return e.meta.requiresAuth}))&&!r?a("/login"):a()}));var Ie=Le,Ne=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Header"),t("NavTabs"),t("router-view"),t("Spinner")],1)},Me=[],Ee=function(){var e=this,t=e._self._c;return e.isLoggedIn?t("header",{staticClass:"header"},[e._m(0),t("div",{staticClass:"date"},[e._v(" "+e._s(e.currentDate)+" ")])]):e._e()},$e=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"logo"},[t("span",{staticClass:"logo-text"},[e._v("INDOBENUA")])])}];function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(a),!0).forEach((function(t){Object(D["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ve={name:"Header",computed:Ae({},Object(g["c"])({isLoggedIn:function(e){return!!e.user}})),data:function(){return{currentDate:""}},mounted:function(){this.updateCurrentDate()},methods:{updateCurrentDate:function(){var e=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric"};this.currentDate=e.toLocaleDateString("id-ID",t)}}},qe=Ve,Be=(a("88cc"),Object(O["a"])(qe,Ee,$e,!1,null,"7602e895",null)),He=Be.exports,ze=function(){var e=this,t=e._self._c;return e.isLoggedIn?t("nav",{staticClass:"nav-tabs"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("Home")]),t("router-link",{staticClass:"nav-link",attrs:{to:"/task"}},[e._v("Task")]),t("router-link",{staticClass:"nav-link",attrs:{to:"/service-call"}},[e._v("Service Call")]),t("router-link",{staticClass:"nav-link",attrs:{to:"/profile"}},[e._v("Profile")])],1):e._e()},Je=[];function Ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(a),!0).forEach((function(t){Object(D["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ye={name:"NavTabs",computed:We({},Object(g["c"])({isLoggedIn:function(e){return!!e.user}}))},Ke=Ye,Qe=(a("e4dd"),Object(O["a"])(Ke,ze,Je,!1,null,"736ae2a6",null)),Xe=Qe.exports,Ze=function(){var e=this,t=e._self._c;return e.isLoading?t("div",{staticClass:"spinner-overlay"},[t("div",{staticClass:"spinner"})]):e._e()},et=[];function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach((function(t){Object(D["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var rt={computed:at({},Object(g["c"])({isLoading:function(e){return e.isLoading}}))},nt=rt,st=(a("f364"),Object(O["a"])(nt,Ze,et,!1,null,"3ac66530",null)),it=st.exports;function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(a),!0).forEach((function(t){Object(D["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var lt={name:"App",components:{Header:He,NavTabs:Xe,Spinner:it},created:function(){this.fetchUser()},methods:ct({},Object(g["b"])(["fetchUser"]))},ut=lt,pt=(a("9e5d"),Object(O["a"])(ut,Ne,Me,!1,null,null,null)),dt=pt.exports;n.a.use(u["default"]),n.a.config.productionTip=!1,n.a.prototype.$axios=C,new n.a({store:b,router:Ie,render:function(e){return e(dt)}}).$mount("#app")},"5d2f":function(e,t,a){},"64a4":function(e,t,a){"use strict";a("fe92")},"7bc7":function(e,t,a){"use strict";a("c9e1")},"886a":function(e,t,a){},"88cc":function(e,t,a){"use strict";a("3b1f")},"9e5d":function(e,t,a){"use strict";a("0270")},a7df:function(e,t,a){"use strict";a("f97f")},b8f9:function(e,t,a){},b948:function(e,t,a){"use strict";a("460c")},c29e:function(e,t,a){},c9e1:function(e,t,a){},cc14:function(e,t,a){"use strict";a("5358")},e4dd:function(e,t,a){"use strict";a("5d2f")},f2f3:function(e,t,a){"use strict";a("c29e")},f364:function(e,t,a){"use strict";a("b8f9")},f97f:function(e,t,a){},fae8:function(e,t,a){"use strict";a("16c4")},fe92:function(e,t,a){}});
//# sourceMappingURL=app.789de7cb.js.map