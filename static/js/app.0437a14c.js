(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},s={app:0},n=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0220":function(t,e,a){"use strict";a("b5c8")},1487:function(t,e,a){"use strict";a("18c6")},"16c4":function(t,e,a){},"18c6":function(t,e,a){},"3b1f":function(t,e,a){},"41fd":function(t,e,a){"use strict";a("e965")},"460c":function(t,e,a){},5358:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("ba4c"),s=a.n(r),n=a("660e");s.a.use(n["a"],{breakpoints:{mobile:450,tablet:900,laptop:1250,desktop:1/0}});var i=a("8c4f");s.a.use(i["a"]);var o=a("bb71");a("da64");s.a.use(o["a"],{theme:{primary:"#ea80fc",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},iconfont:"md"});var c=a("b079"),l=a.n(c);a("4238");s.a.use(l.a,{position:"top"});var u=a("8cb8"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("div",{staticClass:"login-form"},[e("h1",[t._v("INDOBENUA")]),t.loading?e("div",[e("i",{staticClass:"fa fa-spinner fa-spin"})]):e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",required:"",autocomplete:"off"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t.errors.username?e("span",{staticClass:"error-message"},[t._v(t._s(t.errors.username[0]))]):t._e()]),e("div",{staticClass:"input-group"},[e("label",{attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",required:"",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t.errors.password?e("span",{staticClass:"error-message"},[t._v(t._s(t.errors.password[0]))]):t._e()]),e("button",{staticClass:"submit-button",attrs:{type:"submit"}},[t._v("Login")])]),t.errors.general?e("span",{staticClass:"error-message"},[t._v(t._s(t.errors.general))]):t._e()])])},d=[],f=(a("96cf"),a("1da1")),v=(a("7f7f"),a("faac")),m=a.n(v),h=(a("a481"),a("cee4")),g=a("2f62");s.a.use(g["a"]);var b=new g["a"].Store({state:{user:null,isLoading:!1,statistic:{}},mutations:{setUser:function(t,e){t.user=e},setLoading:function(t,e){t.isLoading=e},setStatistic:function(t,e){t.statistic=e}},actions:{fetchUser:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,t.next=4,C.get("/user");case 4:r=t.sent,a("setUser",r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Failed to fetch user data:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}(),setLoading:function(t,e){var a=t.commit;a("setLoading",e)},setStatistic:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,t.next=4,C.get("/statistic");case 4:r=t.sent,a("setStatistic",r.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),s.a.$toast.error("statistic loading error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()}}),_=h["a"].create({baseURL:"https://ac.igm.biz.id/api",headers:{"Content-Type":"application/json"}});_.interceptors.request.use((function(t){var e=localStorage.getItem("api_token");return e&&(t.headers["Authorization"]="Bearer ".concat(e)),b.dispatch("setLoading",!0),t}),(function(t){return b.dispatch("setLoading",!1),Promise.reject(t)})),_.interceptors.response.use((function(t){return b.dispatch("setLoading",!1),t}),(function(t){return t&&t.response&&t.response.status&&401===t.response.status&&(console.log("User tidak autentik"),localStorage.clear(),"/login"!==location.pathname&&location.replace("/login")),b.dispatch("setLoading",!1),Promise.reject(t)}));var C=_,k={data:function(){return{username:"",password:"",deviceName:"",errors:{},loading:!1}},mounted:function(){this.deviceName=m.a.name+" "+m.a.version},methods:{login:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.errors={},this.loading=!0,t.prev=2,t.next=5,C.post("/login",{username:this.username,password:this.password,device_name:this.deviceName});case 5:e=t.sent,e.data&&e.data.token&&(localStorage.setItem("api_token",e.data.token),localStorage.setItem("user_id",e.data.user.id),this.$router.push("/")),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),t.t0.response&&422===t.t0.response.status?this.errors=t.t0.response.data.errors||{}:this.errors.general="Login failed. Please check your credentials and try again.";case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[2,9,12,15]])})));function e(){return t.apply(this,arguments)}return e}()}},w=k,O=(a("cc14"),a("2877")),y=Object(O["a"])(w,p,d,!1,null,"44503f32",null),x=y.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-container"},[t.user?e("div",{staticClass:"welcome-message"},[t._v(" Welcome, "+t._s(t.user.surname)+" "+t._s(t.user.first_name)+" "+t._s(t.user.last_name)+" ")]):t._e(),e("div",{staticClass:"button-container"},[e("button",{staticClass:"button check-in-button",on:{click:t.handleCheckLockIn}},[t._v("Check Lock In")]),e("button",{staticClass:"button check-out-button",on:{click:t.handleCheckLockOut}},[t._v("Check Lock Out")])]),e("div",{staticClass:"location-text"},[t._v(t._s(t.locationText))])])},P=[],D=(a("8e6e"),a("ac6a"),a("456d"),a("ade3"));function S(t){return F.apply(this,arguments)}function F(){return F=Object(f["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e||!e.showLoc){t.next=4;break}return t.next=3,T();case 3:return t.abrupt("return",t.sent);case 4:return t.abrupt("return",new Promise((function(t,e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t({position:a});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(t){e(new Error("Geolocation error: ".concat(t.message)))})):e(new Error("Geolocation is not supported by this browser."))})));case 5:case"end":return t.stop()}}),t)}))),F.apply(this,arguments)}function T(){return L.apply(this,arguments)}function L(){return L=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,a,r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S();case 3:return e=t.sent,a=e.position,r="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(a.coords.latitude,"&lon=").concat(a.coords.longitude),t.next=8,C.get(r);case 8:if(s=t.sent,s.data){t.next=11;break}throw new Error("Indobenua");case 11:return n=s.data,t.abrupt("return",{position:a,loc:n});case 15:throw t.prev=15,t.t0=t["catch"](0),new Error("Failed to fetch location details: ".concat(t.t0.message));case 18:case"end":return t.stop()}}),t,null,[[0,15]])}))),L.apply(this,arguments)}function R(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?R(Object(a),!0).forEach((function(e){Object(D["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var N={data:function(){return{loading:!0,errorMsg:null,position:null,locationDetails:null,deviceName:""}},computed:I(I({},Object(g["c"])(["user","statistic"])),{},{locationText:function(){return this.errorMsg?this.errorMsg:this.locationDetails?this.locationDetails.display_name:"Waiting.."}}),methods:{fetchLocation:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S({showLoc:!0});case 3:e=t.sent,a=e.position,r=e.loc,this.position=a,this.locationDetails=r,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("Failed to fetch location:",t.t0),this.errorMsg=t.t0.message;case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),handleCheckLockIn:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.post("/check-lock",{latitude:this.position.coords.latitude,longitude:this.position.coords.longitude,description:"Check Lock In",name:"check_clock_in"});case 3:alert("Success","Check Lock In successful"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),s.a.$toast.error(t.t0.message),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}(),handleCheckLockOut:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.post("/check-lock",{latitude:this.position.coords.latitude,longitude:this.position.coords.longitude,description:"Check Lock Out",name:"check_clock_out"});case 3:alert("Success","Check Lock Out successful"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),s.a.$toast.error(t.t0.message),console.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.deviceName=m.a.name+" "+m.a.version,this.fetchLocation(),setTimeout((function(){localStorage.getItem("api_token")&&!document.querySelector(".nav-tabs")&&location.reload()}),5e3)}},M=N,E=(a("df29"),Object(O["a"])(M,j,P,!1,null,"276e9417",null)),$=E.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-container"},[e("div",{staticClass:"header-container"},[e("div",{staticClass:"filter-container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"input",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),e("button",{staticClass:"filter",on:{click:t.toggleDateFilterModal}},[t._v(" "+t._s(t.dateFilter)+" ")]),e("button",{staticClass:"filter",style:{backgroundColor:t.getStatusFilterColor()},on:{click:t.toggleStatusFilterModal}},[t._v(" "+t._s(t.statusFilter)+" ")])])]),t.loading?e("div",{staticClass:"loading-indicator"},[e("div",{staticClass:"loading-text"},[t._v("Loading...")])]):t.filteredTasks.length?e("div",{staticClass:"tasks-list"},t._l(t.filteredTasks,(function(a,r){return e("div",{key:r,staticClass:"task-item"},[e("router-link",{staticClass:"task-link",attrs:{to:{name:"DetailTask",params:{task:a,id:a.id}}}},[e("div",{staticClass:"item",style:{backgroundColor:t.getStatusFilterColor()}},[e("div",{staticClass:"avatar"},[e("span",{staticClass:"avatar-text"},[t._v(t._s(a.store.store_code))])]),e("div",{staticClass:"item-content"},[e("div",{staticClass:"title"},[t._v(t._s(a.store.route.index_route)+". "+t._s(a.store.store_name))]),e("div",{staticClass:"description"},[t._v(t._s(a.trx_no)+" Periode: "+t._s(a.periode))]),e("div",{staticClass:"reminder"},[t._v(" "+t._s(a.previous_month_projects.reduce((function(t,e){return(t?"":"REMINDER: ")+e.note}),"").substr(0,50))+" ")])]),e("div",{staticClass:"right-column"},[e("div",{staticClass:"req-date"},[t._v(t._s(t.formatDate(a.req_date)))])])])])],1)})),0):e("div",{staticClass:"empty-message"},[e("div",[t._v("No tasks available.")])]),t.isDateFilterModalVisible?e("div",{staticClass:"modal-backdrop"},[e("div",{staticClass:"modal-container"},[e("button",{on:{click:function(e){return t.selectDateFilter("Hari Ini")}}},[t._v("Hari Ini")]),e("button",{on:{click:function(e){return t.selectDateFilter("Minggu Ini")}}},[t._v("Minggu Ini")]),e("button",{on:{click:function(e){return t.selectDateFilter("Bulan Ini")}}},[t._v("Bulan Ini")])])]):t._e(),t.isStatusFilterModalVisible?e("div",{staticClass:"modal-backdrop"},[e("div",{staticClass:"modal-container"},[e("button",{on:{click:function(e){return t.selectStatusFilter("Pending")}}},[t._v("Pending")]),e("button",{on:{click:function(e){return t.selectStatusFilter("Review")}}},[t._v("Review")]),e("button",{on:{click:function(e){return t.selectStatusFilter("Lengkap")}}},[t._v("Lengkap")])])]):t._e()])},V=[],A=(a("6762"),a("2fdb"),{data:function(){return{loading:!1,tasks:[],searchText:"",dateFilter:"Hari Ini",statusFilter:"Pending",isDateFilterModalVisible:!1,isStatusFilterModalVisible:!1}},computed:{filteredTasks:function(){var t=this;return this.tasks.filter((function(e){return(e.store.store_name.toLowerCase().includes(t.searchText.toLowerCase())||e.task.subject.toLowerCase().includes(t.searchText.toLowerCase())||e.store.store_code.toLowerCase().includes(t.searchText.toLowerCase()))&&t.filterTasks(e)}))}},methods:{fetchTasks:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,C.get("/task");case 4:e=t.sent,this.tasks=e.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error fetching tasks:",t.t0);case 11:return t.prev=11,this.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[1,8,11,14]])})));function e(){return t.apply(this,arguments)}return e}(),filterTasks:function(t){var e=this,a=new Date,r=new Date(t.req_date),s=function(){if("Hari Ini"===e.dateFilter)return r.toDateString()===a.toDateString();if("Minggu Ini"===e.dateFilter){var t=new Date(a.setDate(a.getDate()-a.getDay())),s=new Date(a.setDate(a.getDate()-a.getDay()+6));return r>=t&&r<=s}if("Bulan Ini"===e.dateFilter){var n=new Date(a.getFullYear(),a.getMonth(),1),i=new Date(a.getFullYear(),a.getMonth()+1,0);return r>=n&&r<=i}return!0}(),n=function(){return"Lengkap"===e.statusFilter?"completed"===t.task.status:"Review"===e.statusFilter?"in_progress"===t.task.status&&t.task.comments&&t.task.comments.length>0:"Pending"!==e.statusFilter||"in_progress"===t.task.status&&(!t.task.comments||0===t.task.comments.length)}();return"Hari Ini"===this.dateFilter&&"Pending"===this.statusFilter?r<=a&&n:s&&n},toggleDateFilterModal:function(){this.isDateFilterModalVisible=!this.isDateFilterModalVisible},toggleStatusFilterModal:function(){this.isStatusFilterModalVisible=!this.isStatusFilterModalVisible},selectDateFilter:function(t){this.dateFilter=t,this.isDateFilterModalVisible=!1},selectStatusFilter:function(t){this.statusFilter=t,this.isStatusFilterModalVisible=!1},getStatusFilterColor:function(){switch(this.statusFilter){case"Pending":return"#fff3b0";case"Review":return"#b2f0f0";case"Lengkap":return"#d4f8d4";default:return"#fff"}},formatDate:function(t){var e=new Date(t);return e.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit"})}},mounted:function(){this.fetchTasks()}}),q=A,B=(a("7bc7"),Object(O["a"])(q,U,V,!1,null,"72ac602d",null)),H=B.exports,z=function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"detailTaskContainer",staticClass:"detail-task-container"},[e("div",{staticClass:"header"},[e("router-link",{staticClass:"back-button",attrs:{to:"/task"}},[t._v("Back to Tasks")]),e("h1")],1),t.task?e("div",[e("div",{staticClass:"task-detail"},[e("h2",[t._v(t._s(t.task.store.store_name))]),e("p",[e("strong",[t._v("Kode Toko:")]),t._v(" "+t._s(t.task.store.store_code))]),e("p",[e("strong",[t._v("Rute:")]),t._v(" "+t._s(t.task.store.route.index_route))]),e("p",[e("strong",[t._v("Nomer Transaksi:")]),t._v(" "+t._s(t.task.trx_no))]),e("p",[e("strong",[t._v("Periode:")]),t._v(" "+t._s(t.task.periode))]),e("p",[e("strong",[t._v("Request Date:")]),t._v(" "+t._s(t.formatDate(t.task.req_date)))]),e("p",[e("strong",[t._v("Status:")]),t._v(" "+t._s(t.task.task.status))])]),e("div",{staticClass:"infoContainer"},[e("div",{staticClass:"infoBox"},[e("div",{staticClass:"infoTitle"},[t._v("Catatan bulan lalu:")]),e("div",{staticClass:"red-text"},[t._v(" "+t._s(t.task.previous_month_projects&&t.task.previous_month_projects.length?t.task.previous_month_projects.reduce((function(t,e){return t+e.note}),"").reduce((function(t,e){return t+e.note}),""):"")+" ")])]),e("div",{staticClass:"infoBox"},[e("div",{staticClass:"infoTitle"},[t._v("Tambahkan Catatan bulan ini:")]),e("Modal",{attrs:{isVisible:t.isModalVisible,task:t.task},on:{close:t.closeModal,success:t.handleSuccess}}),e("div",{staticClass:"red-text",on:{click:t.openModal}},[t.task.note?e("span",[t._v(" "+t._s(t.task.note)+"  "),e("i",{staticClass:"fas fa-edit"})]):e("span",{staticClass:"icon-plus danger",on:{click:t.openModal}},[e("i",{staticClass:"fas fa-plus-circle"})])])],1)]),e("hr"),e("div",[e("ul",{ref:"commentList",staticClass:"comment-list"},t._l(t.comments,(function(a,r){return e("li",{key:r},[e("div",{class:{"comment-content current-user-content":a.commented_by.id===t.currentUserId,"comment-content other-user-content":a.commented_by.id!==t.currentUserId}},[e("div",{staticClass:"comment-header"},[e("span",{staticClass:"commented-by"},[t._v(t._s(a.commented_by.nickname))]),e("span",{staticClass:"comment-time"},[t._v(t._s(a.created_at))])]),a.media&&a.media.length?e("div",{staticClass:"comment-images"},t._l(a.media,(function(t,a){return e("img",{key:a,staticClass:"comment-image",attrs:{src:t.display_url,alt:"Comment image "+a,title:t.display_name}})})),0):t._e(),t._v(" "+t._s(a.comment)+" ")])])})),0)])]):e("div",{staticClass:"loading-indicator"},[e("i",{staticClass:"fa fa-spinner fa-spin"})])]),t.previewImages.length?e("div",{staticClass:"preview-image-container"},t._l(t.previewImages,(function(a,r){return e("div",{key:r,staticClass:"preview-image-wrapper"},[e("img",{staticClass:"preview-image",attrs:{src:a.data,alt:a.name}}),e("span",{staticClass:"remove-image",on:{click:function(e){return t.removePreviewImage(r)}}},[t._v("×")])])})),0):t._e(),e("div",{staticClass:"input-form"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.additionalText,expression:"additionalText"}],staticClass:"text-input",attrs:{placeholder:"Tambahkan pesan..."},domProps:{value:t.additionalText},on:{input:function(e){e.target.composing||(t.additionalText=e.target.value)}}}),e("div",{staticClass:"icons"},[e("label",{staticClass:"file-upload-button",attrs:{for:"file-upload"}},[e("i",{staticClass:"fas fa-paperclip"}),e("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{id:"file-upload",type:"file",multiple:""},on:{change:t.handleFileUpload}})]),e("button",{staticClass:"send-button",on:{click:t.submitData}},[e("i",{staticClass:"fas fa-paper-plane"})])])])])},J=[],G=(a("5df3"),a("1c4c"),function(){var t=this,e=t._self._c;return t.isVisible?e("div",{staticClass:"modal-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal.apply(null,arguments)}}},[e("div",{staticClass:"modal-content"},[e("span",{staticClass:"close",on:{click:t.closeModal}},[t._v("×")]),e("h2",{staticClass:"reminder-title"},[t._v("Add Reminder")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[t._m(0),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reminderText,expression:"reminderText"}],attrs:{placeholder:"Tulis disini",id:"reminder",required:""},domProps:{value:t.reminderText},on:{input:function(e){e.target.composing||(t.reminderText=e.target.value)}}})]),e("button",{staticClass:"btn-submit-modal",attrs:{type:"submit"}},[t._v("Simpan!")])])])]):t._e()}),W=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"reminder"}},[e("small",[t._v("Untuk pengingat bulan depan:")])])}];function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function K(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(a),!0).forEach((function(e){Object(D["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Q={name:"Modal",props:["isVisible","task"],data:function(){return{reminderText:""}},methods:{closeModal:function(){this.$emit("close")},submitForm:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.post("/reminder/"+this.task.id,{reminder_message:this.reminderText});case 3:e=t.sent,200===e.status&&(this.$emit("success",K(K({},e.data),{},{reminderText:this.reminderText})),this.closeModal()),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Error submitting reminder:",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.reminderText=this.task.note}},X=Q,Z=(a("64a4"),Object(O["a"])(X,G,W,!1,null,null,null)),tt=Z.exports,et={components:{Modal:tt},data:function(){return{task:this.$route.params.task||null,additionalText:"",previewImages:[],isModalVisible:!1,currentUserId:JSON.parse(localStorage.getItem("user_id")||"1")}},created:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.task){t.next=5;break}return e=this.$route.params.id,t.next=4,this.fetchTask(e);case 4:this.task=t.sent;case 5:this.comments=this.task.task.comments||[],setTimeout((function(){a.scrollToBottom()}),500);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{fetchTask:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,C.get("/task/".concat(e));case 4:return a=t.sent,t.abrupt("return",a.data[0]);case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error fetching service call:",t.t0),s.a.$toast.error("Error","Gagal memuat data service call.");case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[1,8,12,15]])})));function e(e){return t.apply(this,arguments)}return e}(),formatDate:function(t){var e=new Date(t);return e.toLocaleDateString("id-ID")},handleFileUpload:function(t){var e=this,a=Array.from(t.target.files);a.forEach((function(t){var a=new FileReader;a.onload=function(a){e.previewImages.push({name:t.name,data:a.target.result,file:t})},a.readAsDataURL(t)}))},removePreviewImage:function(t){this.previewImages.splice(t,1)},submitData:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.additionalText.trim()){t.next=3;break}return s.a.$toast.error("Tambahkan pesan terlebih dahulu"),t.abrupt("return");case 3:return e=new FormData,e.append("alfa_id",this.task.id),e.append("task_id",this.task.task.id),e.append("comment",this.additionalText),this.previewImages.forEach((function(t){e.append("photos[]",t.file,t.name)})),t.prev=8,t.next=11,C.post("/task",e,{headers:{"Content-Type":"multipart/form-data"}});case 11:a=t.sent,r=a.data,r.success&&(this.comments=r.data.comments,this.additionalText="",this.previewImages=[],this.scrollToBottom()),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](8),console.error("Error submitting data:",t.t0);case 19:case"end":return t.stop()}}),t,this,[[8,16]])})));function e(){return t.apply(this,arguments)}return e}(),openModal:function(){this.isModalVisible=!0},closeModal:function(){this.isModalVisible=!1},handleSuccess:function(t){t.success&&(this.task.note=t.reminderText),console.log("Reminder added successfully:",t)},scrollToBottom:function(){var t=this;this.$nextTick((function(){var e=t.$refs.detailTaskContainer;setTimeout((function(){e.scrollTop=e.scrollHeight}),200)}))}}},at=et,rt=(a("41fd"),Object(O["a"])(at,z,J,!1,null,"d80e97c0",null)),st=rt.exports,nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"filter-container"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"input",attrs:{placeholder:"Search..."},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),e("button",{staticClass:"filter",style:{backgroundColor:t.getStatusFilterColor()},on:{click:function(e){t.isStatusFilterModalVisible=!0}}},[t._v(" "+t._s(t.statusFilter)+" ")])]),e("transition",{attrs:{name:"fade"}},[t.isStatusFilterModalVisible?e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-backdrop",on:{click:function(e){t.isStatusFilterModalVisible=!1}}}),e("div",{staticClass:"modal-container"},[e("button",{staticClass:"pending",on:{click:function(e){return t.setStatusFilter("Pending")}}},[t._v("Pending")]),e("button",{staticClass:"progress",on:{click:function(e){return t.setStatusFilter("Progress")}}},[t._v("Progress")]),e("button",{staticClass:"solved",on:{click:function(e){return t.setStatusFilter("Solved")}}},[t._v("Solved")])])]):t._e()]),t.loading?e("div",{staticClass:"loading-indicator"},[e("i",{staticClass:"fa fa-spinner fa-spin"})]):e("div",[t.filteredServiceCalls.length?e("ul",{staticClass:"service-call-list"},t._l(t.filteredServiceCalls,(function(a,r){return e("li",{key:r,staticClass:"service-call-item",style:{backgroundColor:t.getStatusFilterColor()},on:{click:function(e){return t.navigateToDetail(a)}}},[t._m(0,!0),e("div",{staticClass:"item-content"},[e("p",{staticClass:"title"},[t._v(t._s(a.store&&a.store.store_code)+" "+t._s(a.store&&a.store.store_name))]),e("p",{staticClass:"description"},[t._v(t._s(a.subject))])]),e("div",{staticClass:"right-column"},[e("p",{staticClass:"tgl"},[t._v(t._s(t.formatDate(a.trx_date)))])])])})),0):e("div",{staticClass:"centered-view"},[e("p",{staticClass:"centered-text"},[t._v("Tidak ada service call saat ini.")])])])],1)},it=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"fa fa-phone",attrs:{"aria-hidden":"true"}})])}],ot={data:function(){return{loading:!1,serviceCalls:[],searchText:"",statusFilter:"Pending",isStatusFilterModalVisible:!1}},computed:{filteredServiceCalls:function(){var t=this;return this.serviceCalls.filter((function(e){return(e.store&&e.store.store_name.toLowerCase().includes(t.searchText.toLowerCase())||e.store&&e.store.store_code.toLowerCase().includes(t.searchText.toLowerCase())||e.subject&&e.subject.toLowerCase().includes(t.searchText.toLowerCase()))&&t.filterServiceCalls(e)}))}},methods:{fetchServiceCalls:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,C.get("/service-call");case 4:e=t.sent,this.serviceCalls=e.data,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),s.a.$toast.error("Error fetching service calls:"),console.log("Error fetching service calls:",t.t0);case 12:return t.prev=12,this.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[1,8,12,15]])})));function e(){return t.apply(this,arguments)}return e}(),filterServiceCalls:function(t){return"Pending"===this.statusFilter?"pending"===t.status:"Progress"===this.statusFilter?"in_progress"===t.status:"Solved"!==this.statusFilter||"solved"===t.status},getStatusFilterColor:function(){switch(this.statusFilter){case"Pending":return"#ffebcc";case"Progress":return"#52e5ed";case"Solved":return"#d4f8d4";default:return"#fff"}},setStatusFilter:function(t){this.statusFilter=t,this.isStatusFilterModalVisible=!1},formatDate:function(t){return t.replace(/(\d{4})-(\d{2})-(\d{2})/,"$3/$2")},navigateToDetail:function(t){this.$router.push({name:"DetailServiceCall",params:{serviceCall:t,id:t.id}})}},mounted:function(){this.fetchServiceCalls()}},ct=ot,lt=(a("b948"),Object(O["a"])(ct,nt,it,!1,null,"f2a680d6",null)),ut=lt.exports,pt=function(){var t=this,e=t._self._c;return t.serviceCall?e("div",{staticClass:"container"},[e("header",{staticClass:"header"},[e("h1",[t._v(t._s(t.serviceCall.store.store_code)+" "+t._s(t.serviceCall.store.store_name))])]),t.loading?e("div",{staticClass:"indicator"},[e("span",[t._v("Loading...")])]):e("div",[e("div",{staticClass:"content"},[e("div",{staticClass:"details"},[e("div",{staticClass:"detail-row"},[e("i",{staticClass:"fa fa-calendar"}),e("span",[t._v(t._s(t.formatDate(t.serviceCall.trx_date)))])]),e("div",{staticClass:"detail-row"},[e("i",{staticClass:"fa fa-info-circle"}),e("span",[t._v(t._s(t.serviceCall.status))])]),e("div",{staticClass:"detail-row"},[e("i",{staticClass:"fa fa-phone"}),e("span",[t._v(t._s(t.serviceCall.pic))])]),e("div",{staticClass:"detail-row"},[e("i",{staticClass:"fa fa-file-text"}),e("span",[t._v(t._s(t.serviceCall.subject))])]),e("div",{staticClass:"detail-row"},[e("i",{staticClass:"fa fa-bank"}),e("span",[t._v(t._s(t.serviceCall.store.address))])])]),t._l(t.lines,(function(a){return e("div",{key:a.id,staticClass:"line-container"},[e("h2",[t._v("Unit No: "+t._s(a.unit_no))]),e("h3",[t._v("Complain Details: "+t._s(a.complain_details))]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.trouble_causer,expression:"line.trouble_causer"}],staticClass:"input",attrs:{placeholder:"Penyebab"},domProps:{value:a.trouble_causer},on:{input:function(e){e.target.composing||t.$set(a,"trouble_causer",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:a.solution,expression:"line.solution"}],staticClass:"input",attrs:{placeholder:"Solusi"},domProps:{value:a.solution},on:{input:function(e){e.target.composing||t.$set(a,"solution",e.target.value)}}}),e("div",{staticClass:"photo-container"},[e("button",{staticStyle:{"font-size":"x-large"},on:{click:function(e){return t.handleAddPhotos(a.id)}}},[e("i",{staticClass:"fa fa-camera"})]),t._l(a.photos,(function(t,a){return e("div",{key:a,staticClass:"photo-preview"},[t.document_name?e("img",{staticClass:"photo",attrs:{src:"https://ac.igm.biz.id/public/uploads/media/"+t.document_name}}):e("img",{staticClass:"photo",attrs:{src:t.uri}})])}))],2)])})),e("div",{staticClass:"button-container"},[e("button",{staticClass:"button cancel-button",on:{click:t.handleCancel}},[t._v("Batal")]),e("button",{staticClass:"button",on:{click:t.handleSave}},[t._v("Simpan")])])],2)])]):t._e()},dt=[],ft=a("2909");function vt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function mt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(a),!0).forEach((function(e){Object(D["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ht={data:function(){return{loading:!1,serviceCall:this.$route.params.serviceCall||null,lines:[]}},created:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.serviceCall){t.next=6;break}return e=this.$route.params.id,t.next=4,this.fetchServiceCall(e);case 4:t.next=7;break;case 6:this.initializeLines(this.serviceCall.lines);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{fetchServiceCall:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,C.get("/service-call/".concat(e));case 4:a=t.sent,this.serviceCall=a.data,this.initializeLines(this.serviceCall.lines),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.error("Error fetching service call:",t.t0),s.a.$toast.error("Error","Gagal memuat data service call.");case 13:return t.prev=13,this.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[1,9,13,16]])})));function e(e){return t.apply(this,arguments)}return e}(),initializeLines:function(t){this.lines=t.map((function(t){return mt({},t)}))},formatDate:function(t){var e={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,e)},handleInputChange:function(t,e,a){this.lines=this.lines.map((function(r){return r.id===t?mt(mt({},r),{},Object(D["a"])({},e,a)):r}))},handleAddPhotos:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e){var a,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=document.createElement("input"),a.type="file",a.accept="image/*",a.multiple=!0,a.onchange=function(t){for(var a=t.target.files,s=[],n=function(){var t=a[i],n=new FileReader;n.onload=function(n){s.push({uri:n.target.result,file:t}),s.length===a.length&&(r.lines=r.lines.map((function(t){return t.id===e?mt(mt({},t),{},{photos:[].concat(Object(ft["a"])(t.photos),s)}):t})))},n.readAsDataURL(t)},i=0;i<a.length;i++)n()},a.click();case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),handleSave:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,e=new FormData,e.append("sc_id",this.serviceCall.id),t.next=6,S();case 6:return a=t.sent,r=a.position,r&&e.append("position",JSON.stringify(r)),this.lines.forEach((function(t,a){t.photos.forEach((function(t){t.file&&e.append("lines[".concat(a,"][photos][]"),t.file)})),e.append("lines[".concat(a,"][solution]"),t.solution),e.append("lines[".concat(a,"][trouble_causer]"),t.trouble_causer)})),t.next=12,C.post("/service-call/update",e,{headers:{"Content-Type":"multipart/form-data"}});case 12:s.a.$toast.success("Berhasil disimpan"),this.$router.push({name:"ServiceCall",params:{serviceCall:this.serviceCall}}),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](1),console.error("Error saving data:",t.t0),s.a.$toast.error("Error","Terjadi kesalahan saat menyimpan data");case 20:return t.prev=20,this.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[1,16,20,23]])})));function e(){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.$router.push({name:"ServiceCall",params:{serviceCall:this.serviceCall}})}}},gt=ht,bt=(a("fae8"),Object(O["a"])(gt,pt,dt,!1,null,"7353d2c0",null)),_t=bt.exports,Ct=function(){var t=this,e=t._self._c;return e("div",{staticClass:"safe-area"},[e("router-link",{attrs:{to:{name:"EditProfile",params:{userData:t.userData}}}},[e("button",{staticClass:"edit-button"},[e("i",{staticClass:"fa fa-edit edit-btn"})])]),e("div",{staticClass:"profile-container"},[e("img",{staticClass:"profile-image",attrs:{src:t.userData&&t.userData.media?t.userData.media.display_url:"/assets/images/default_profile.png",alt:"Profile Image"}}),e("h1",{staticClass:"title"},[t._v("Profile")]),t.userData?e("div",{staticClass:"data-profile-container"},[e("div",{staticClass:"info-container"},[e("span",{staticClass:"label"},[t._v("Name:")]),e("span",{staticClass:"value"},[t._v(t._s(t.userData.surname)+" "+t._s(t.userData.first_name)+" "+t._s(t.userData.last_name))])]),e("div",{staticClass:"info-container"},[e("span",{staticClass:"label"},[t._v("Username:")]),e("span",{staticClass:"value"},[t._v(t._s(t.userData.username))])]),e("div",{staticClass:"info-container"},[e("span",{staticClass:"label"},[t._v("Email:")]),e("span",{staticClass:"value"},[t._v(t._s(t.userData.email))])]),e("div",{staticClass:"info-container"},[e("span",{staticClass:"label"},[t._v("Jabatan:")]),e("span",{staticClass:"value"},[t._v(t._s(t.userData.jabatan.name))])]),e("div",{staticClass:"logout-button-container"},[e("button",{on:{click:t.handleLogout}},[t._v("Logout")])])]):t._e()])],1)},kt=[],wt={setup:function(){var t=Object(r["ref"])(null),e=Object(r["ref"])(!0),a=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.value=!0,t.prev=1,t.next=4,C.post("/logout");case 4:localStorage.clear(),location.replace("/login"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Logout failed:",t.t0);case 11:return t.prev=11,e.value=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(){return t.apply(this,arguments)}}(),s=function(){var a=Object(f["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C.get("/user");case 3:r=a.sent,t.value=r.data,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error("Error fetching user data:",a.t0);case 10:return a.prev=10,e.value=!1,a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})));return function(){return a.apply(this,arguments)}}();return Object(r["onMounted"])((function(){s()})),{userData:t,loading:e,handleLogout:a}}},Ot=wt,yt=(a("1487"),Object(O["a"])(Ot,Ct,kt,!1,null,"4ece3d8e",null)),xt=yt.exports,jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"safe-area"},[e("div",{staticClass:"custom-header"}),e("div",{staticClass:"form-container"},[e("div",{staticClass:"image-container"},[e("img",{staticClass:"profile-image",attrs:{src:t.profilePhoto?t.profilePhoto.uri:t.userData&&t.userData.media?t.userData.media.display_url:"/assets/images/default_profile.png",alt:"Profile Image"}}),e("button",{staticClass:"edit-icon",on:{click:t.pickImage}},[e("i",{staticClass:"fa fa-edit"})]),e("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.handleFileChange}})]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.surName,expression:"surName"}],staticClass:"input",attrs:{placeholder:"SurName"},domProps:{value:t.surName},on:{input:function(e){e.target.composing||(t.surName=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"input",attrs:{placeholder:"First Name"},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"input",attrs:{placeholder:"Last Name"},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentPassword,expression:"currentPassword"}],staticClass:"input",attrs:{type:"password",placeholder:"Current Password"},domProps:{value:t.currentPassword},on:{input:function(e){e.target.composing||(t.currentPassword=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"input",attrs:{type:"password",placeholder:"Confirm Password"},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),e("button",{staticClass:"save-button",on:{click:t.handleSave}},[t._v("Simpan")])]),t.loading?e("div",{staticClass:"loading-overlay"},[e("i",{staticClass:"fa fa-spinner fa-spin"})]):t._e()])},Pt=[],Dt={setup:function(){var t=Object(r["ref"])(null),e=Object(r["ref"])(t.surname||""),a=Object(r["ref"])(t.first_name||""),n=Object(r["ref"])(t.last_name||""),i=Object(r["ref"])(t.email||""),o=Object(r["ref"])(""),c=Object(r["ref"])(""),l=Object(r["ref"])(""),u=Object(r["ref"])(t.profile_photo||null),p=Object(r["ref"])(!1),d=Object(r["ref"])(null),v=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:d.value.click();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(t){var e=t.target.files[0];if(e){var a=new FileReader;a.onload=function(){u.value={uri:URL.createObjectURL(e),file:e}},a.readAsDataURL(e)}},h=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.a.$toast.success("Password berhasil diubah"),localStorage.clear(),location.replace("/login");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var r,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o.value===c.value){t.next=3;break}return s.a.$toast.error("Password tidak sama!"),t.abrupt("return");case 3:if(!o.value||l.value){t.next=6;break}return s.a.$toast.error("Passwords tidak boleh kosong!"),t.abrupt("return");case 6:return p.value=!0,t.prev=7,r=new FormData,r.append("surname",e.value),r.append("first_name",a.value),r.append("last_name",n.value),r.append("email",i.value),o.value&&(r.append("password",o.value),r.append("current_password",l.value)),u.value&&u.value.file&&r.append("profile_photo",u.value.file),t.next=17,C.post("/user",r,{headers:{"Content-Type":"multipart/form-data"}});case 17:if(d=t.sent,200!==d.status){t.next=28;break}if(!d.data.password_changed){t.next=22;break}return h(),t.abrupt("return");case 22:if(!d.data.error){t.next=25;break}return s.a.$toast.error(d.data.msg),t.abrupt("return");case 25:s.a.$toast.success("Profile berhasil diupdate"),t.next=29;break;case 28:s.a.$toast.error("Failed to update profile");case 29:t.next=35;break;case 31:t.prev=31,t.t0=t["catch"](7),console.error("Error updating profile:",t.t0),s.a.$toast.error("Failed to update profile");case 35:return t.prev=35,p.value=!1,t.finish(35);case 38:case"end":return t.stop()}}),t,null,[[7,31,35,38]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/user");case 3:a=e.sent,t.value=a.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching user data:",e.t0);case 10:return e.prev=10,p.value=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])((function(){b()})),Object(r["watch"])(t,(function(t){t&&(e.value=t.surname||"",a.value=t.first_name||"",n.value=t.last_name||"",i.value=t.email||"",u.value=t.profile_photo||null)})),{userData:t,surName:e,firstName:a,lastName:n,email:i,password:o,confirmPassword:c,currentPassword:l,profilePhoto:u,loading:p,pickImage:v,handleFileChange:m,handleSave:g,fileInput:d}}},St=Dt,Ft=(a("a7df"),Object(O["a"])(St,jt,Pt,!1,null,"1149248b",null)),Tt=Ft.exports,Lt=[{path:"/",exact:!0,component:$,icon:"home",name:"Home",meta:{requiresAuth:!0}},{path:"/task",exact:!0,component:H,icon:"psychology",name:"Task",meta:{requiresAuth:!0}},{path:"/task/:id",exact:!0,component:st,icon:"psychology",name:"DetailTask",meta:{requiresAuth:!0}},{path:"/service-call",exact:!0,component:ut,icon:"psychology",name:"ServiceCall",meta:{requiresAuth:!0}},{path:"/service-call/:id",exact:!0,component:_t,icon:"psychology",name:"DetailServiceCall",meta:{requiresAuth:!0}},{path:"/profile",exact:!0,component:xt,icon:"psychology",name:"Profile",meta:{requiresAuth:!0}},{path:"/edit-profile",exact:!0,component:Tt,icon:"psychology",name:"EditProfile",meta:{requiresAuth:!0}},{path:"/login",exact:!0,component:x,icon:"question_answer",name:"Login"},{path:"*",redirect:"/"}],Rt=new i["a"]({routes:Lt,mode:"history"});Rt.beforeEach((function(t,e,a){var r=localStorage.getItem("api_token");t.matched.some((function(t){return t.meta.requiresAuth}))&&!r?a("/login"):a()}));var It=Rt,Nt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header"),e("NavTabs"),e("router-view"),e("Spinner")],1)},Mt=[],Et=function(){var t=this,e=t._self._c;return t.isLoggedIn?e("header",{staticClass:"header"},[t._m(0),e("div",{staticClass:"date"},[t._v(" "+t._s(t.currentDate)+" ")])]):t._e()},$t=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("span",{staticClass:"logo-text"},[t._v("INDOBENUA")])])}];function Ut(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Vt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(a),!0).forEach((function(e){Object(D["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ut(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var At={name:"Header",computed:Vt({},Object(g["c"])({isLoggedIn:function(t){return!!t.user}})),data:function(){return{currentDate:""}},mounted:function(){this.updateCurrentDate()},methods:{updateCurrentDate:function(){var t=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric"};this.currentDate=t.toLocaleDateString("id-ID",e)}}},qt=At,Bt=(a("88cc"),Object(O["a"])(qt,Et,$t,!1,null,"7602e895",null)),Ht=Bt.exports,zt=function(){var t=this,e=t._self._c;return t.isLoggedIn?e("nav",{staticClass:"nav-tabs"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Home")]),e("router-link",{staticClass:"nav-link",attrs:{to:"/task"}},[t._v(" Task "),t.statistics.task?e("span",{staticClass:"badge"},[t._v(t._s(t.statistics.task))]):t._e()]),e("router-link",{staticClass:"nav-link",attrs:{to:"/service-call"}},[t._v(" Service Call "),t.statistics.sc?e("span",{staticClass:"badge"},[t._v(t._s(t.statistics.sc))]):t._e()]),e("router-link",{staticClass:"nav-link",attrs:{to:"/profile"}},[t._v("Profile")])],1):t._e()},Jt=[];function Gt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Wt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(a),!0).forEach((function(e){Object(D["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Yt={name:"NavTabs",computed:Wt({},Object(g["c"])({isLoggedIn:function(t){return!!t.user},statistics:function(t){return t.statistic}}))},Kt=Yt,Qt=(a("0220"),Object(O["a"])(Kt,zt,Jt,!1,null,"776d85a2",null)),Xt=Qt.exports,Zt=function(){var t=this,e=t._self._c;return t.isLoading?e("div",{staticClass:"spinner-overlay"},[e("div",{staticClass:"spinner"})]):t._e()},te=[];function ee(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function ae(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(a),!0).forEach((function(e){Object(D["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var re={computed:ae({},Object(g["c"])({isLoading:function(t){return t.isLoading}}))},se=re,ne=(a("f364"),Object(O["a"])(se,Zt,te,!1,null,"3ac66530",null)),ie=ne.exports;function oe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function ce(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(a),!0).forEach((function(e){Object(D["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var le={name:"App",components:{Header:Ht,NavTabs:Xt,Spinner:ie},created:function(){this.fetchUser(),this.setStatistic()},methods:ce({},Object(g["b"])(["fetchUser","setStatistic"]))},ue=le,pe=(a("a9a5"),Object(O["a"])(ue,Nt,Mt,!1,null,null,null)),de=pe.exports;s.a.use(u["default"]),s.a.config.productionTip=!1,s.a.prototype.$axios=C,new s.a({store:b,router:It,render:function(t){return t(de)}}).$mount("#app")},"64a4":function(t,e,a){"use strict";a("fe92")},"7bc7":function(t,e,a){"use strict";a("c9e1")},"88cc":function(t,e,a){"use strict";a("3b1f")},a7df:function(t,e,a){"use strict";a("f97f")},a9a5:function(t,e,a){"use strict";a("df60")},b5c8:function(t,e,a){},b8f9:function(t,e,a){},b948:function(t,e,a){"use strict";a("460c")},bebf:function(t,e,a){},c9e1:function(t,e,a){},cc14:function(t,e,a){"use strict";a("5358")},df29:function(t,e,a){"use strict";a("bebf")},df60:function(t,e,a){},e965:function(t,e,a){},f364:function(t,e,a){"use strict";a("b8f9")},f97f:function(t,e,a){},fae8:function(t,e,a){"use strict";a("16c4")},fe92:function(t,e,a){}});
//# sourceMappingURL=app.0437a14c.js.map